<div class="calendar-wrapper">
  <div class="calendar">
    <div class="calendar-header">
      <button (click)="prevMonth()" aria-label="Previous month">❮</button>
      <h2>{{ currentMonth | date: 'MMMM yyyy' }}</h2>
      <button (click)="nextMonth()" aria-label="Next month">❯</button>
    </div>

    <!-- Week Labels -->
    <div class="calendar-grid">
      <div *ngFor="let day of weekDays" class="calendar-day">
        {{ day }}
      </div>
    </div>

    <!-- Calendar Cells -->
    <div class="calendar-grid">
      <div
        *ngFor="let day of calendarDays"
        class="calendar-cell"
        [ngClass]="{
          'today': isToday(day),
          'overdue': day && isOverdueDate(day),
          'empty': !day
        }"
        tabindex="{{ day ? 0 : -1 }}"
        role="button"
        [attr.aria-label]="day ? getAriaLabel(day) : null"
        (click)="onDateClick(day)"
        (keydown.enter)="onDateClick(day)"
      >
        <ng-container *ngIf="day">
          <div class="date-header">
            <span class="date-number">{{ day.getDate() }}</span>

            <lib-due-date-indicator
              *ngIf="hasOverdueTasks(day)"
              [dueDate]="day"
              class="small-indicator"
            ></lib-due-date-indicator>
          </div>

          <div class="task-badge">
            <span *ngFor="let task of getTasksForDate(day).slice(0, 2)">
              • {{ task.title }}
            </span>
            <span *ngIf="getTasksForDate(day).length > 2">
              +{{ getTasksForDate(day).length - 2 }} more
            </span>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>