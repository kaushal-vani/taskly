<div class="form-wrapper">
<form [formGroup]="form" class="task-form" (ngSubmit)="onSubmit()">
  <!-- Title -->
  <div class="form-group">
    <label for="title">Task Title<span class="required">*</span></label>
    <input id="title" type="text" formControlName="title" placeholder="Enter task title" />
  </div>

  <!-- Description -->
  <div class="form-group">
    <label for="description">Description</label>
    <textarea id="description" formControlName="description" placeholder="Add task description"></textarea>
  </div>

  <!-- Reminder Toggle -->
  <div class="form-group form-group--inline">
    <label for="notificationToggle">Enable Reminder?</label>
    <input id="notificationToggle" type="checkbox" formControlName="notificationEnabled" />
  </div>

  <!-- Reminder DateTime -->
  <div class="form-group" *ngIf="form.get('notificationEnabled')?.value">
    <label for="reminderAt">Reminder Date & Time</label>
    <input id="reminderAt" type="datetime-local" formControlName="reminderAt" />
  </div>

  <!-- Priority -->
  <div class="form-group">
    <label for="Priority">Priority</label>
    <div class="radio-group">
      <label *ngFor="let p of priorityOptions">
        <input
          type="radio"
          name="priority"
          [value]="p"
          (change)="form.patchValue({ priority: p })"
          [checked]="form.get('priority')?.value === p"
        />
        {{ p }}
      </label>
    </div>
  </div>

  <!-- Status -->
  <div class="form-group">
    <label for="Status">Status</label>
    <div class="radio-group">
      <label *ngFor="let s of statusOptions">
        <input
          type="radio"
          name="status"
          [value]="s"
          (change)="form.patchValue({ status: s })"
          [checked]="form.get('status')?.value === s"
        />
        {{ s }}
      </label>
    </div>
  </div>

  <!-- Due Date -->
  <div class="form-group">
    <label for="dueDate">Due Date</label>
    <input id="dueDate" type="date" formControlName="dueDate" />
  </div>

  <!-- Tags -->
  <div class="form-group">
    <label for="Tags">Tags</label>
    <div class="chip-container">
      <span
        *ngFor="let tag of tagOptions"
        [class.selected]="form.get('tags')?.value.includes(tag)"
        class="chip"
        role="button"
        tabindex="0"
        (click)="toggleTag(tag)"
        (keydown.enter)="toggleTag(tag)"
        (keydown.space)="toggleTag(tag)"
        [attr.aria-pressed]="form.get('tags')?.value.includes(tag)"
      >
        {{ tag }}
        <span class="remove-icon" *ngIf="form.get('tags')?.value.includes(tag)">&#10005;</span>
      </span>
    </div>
  </div>

  <!-- SubTasks -->
  <div class="form-group">
    <label for="SubTasks">SubTasks</label>
    <div class="subtasks-list">
      <div *ngFor="let sub of subTasks.controls; let i = index" [formGroup]="getSubTaskFormGroup(i)">
        <input type="checkbox" formControlName="isCompleted" />
        <input type="text" formControlName="title" placeholder="Subtask title" />
        <button type="button" class="btn--icon" (click)="removeSubTask(i)">&#10005;</button>
      </div>
    </div>
    <div class="subtask-add">
      <input
        [formControl]="subTaskInputControl"
        placeholder="Add new subtask"
        (keydown.enter)="onSubTaskEnter($event)"
      />
    </div>
  </div>

  <!-- Submit Button -->
  <div class="form-actions">
    <button type="submit" class="btn--primary" [disabled]="form.invalid">Create Task</button>
  </div>
</form>
</div>